!function(t,i){"function"==typeof define&&define.amd?define([],function(){return t.WildReactMixin=i()}):"object"==typeof exports?module.exports=i():t.WildReactMixin=i()}(this,function(){function t(t){t.setState(t.__wdata__)}function i(t){var i;if("string"!=typeof t?i="Bind variable must be a string. Got: "+t:0===t.length?i='Bind variable must be a non-empty string. Got: ""':t.length>768?i="Bind variable is too long to be stored in Wilddog. Got: "+t:/[\[\].#$\/\u0000-\u001F\u007F]/.test(t)&&(i="Bind variable cannot contain any of the following characters: . # $ ] [ /. Got: "+t),"undefined"!=typeof i)throw new Error("WildReactMixin:"+i)}function n(t){if(!t||"function"!=typeof t.ref)throw new Error("WildReactMixin: Invalid Wilddog reference")}function e(i,n,e){var _,o=this.__wdata__[i];if(null===e)_=0;else{var d=r(o,e);_=d+1}o.splice(_,0,a(n)),t(this)}function _(i,n){var e=this.__wdata__[i];e.splice(r(e,n.key()),1),t(this)}function o(i,n){var e=this.__wdata__[i];e[r(e,n.key())]=a(n),t(this)}function d(i,n,e){var _,o=this.__wdata__[i],d=n.key(),a=r(o,d),s=o.splice(a,1)[0];if(null===e)_=0;else{var l=r(o,e);_=l+1}o.splice(_,0,s),t(this)}function r(t,i){for(var n=0,e=t.length;e>n;++n)if(t[n][".key"]===i)return n;return-1}function a(t){var i=t.val(),n={};return"object"==typeof i&&null!==i?n=i:n[".value"]=i,n[".key"]=t.key(),n}function s(r,s,l,h){if(i(s),n(r),"undefined"!=typeof this.__wd__[s])throw new Error("this.state."+s+" is already bound to a Wilddog reference");this.__wd__[s]={},this.__wd__[s].ref=r.ref();var f=this;l?(this.__wdata__[s]=[],t(this),this.__wd__[s].listners={child_added:r.on("child_added",e.bind(this,s),h),child_removed:r.on("child_removed",_.bind(this,s),h),child_changed:r.on("child_changed",o.bind(this,s),h),child_moved:r.on("child_moved",d.bind(this,s),h)}):this.__wd__[s].listeners={value:r.on("value",function(i){f.__wdata__[s]=a(i),t(f)},h)}}return{bindAsArray:function(t,i,n){s.call(this,t,i,!0,n)},bindAsObject:function(t,i,n){s.call(this,t,i,!1,n)},componentWillMount:function(){this.__wd__={},this.__wdata__={}},componentWillUnmount:function(){for(var t in this.__wd__)this.__wd__.hasOwnProperty(t)&&this.unbind(t)},unbind:function(t,n){if(i(t),!this.__wd__[t])throw new Error("this.state."+t+" is not bound to a Wilddog reference");var e=this.__wd__[t].listeners,_=this.__wd__[t].ref;if(e)for(var o in e)e.hasOwnProperty(o)&&_.off(o,e[o]);delete this.__wd__[t];var d={};d[t]=void 0,this.setState(d,n)}}});